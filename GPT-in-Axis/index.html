<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GPT-in-Axis Viewer</title>

    <!-- ============================================================
      ğŸ§  GPT-in-Axis Viewer
      English: A web-based 3D visualization interface for AI-human conversation structure.
      æ—¥æœ¬èª: AIã¨äººé–“ã®å¯¾è©±æ§‹é€ ã‚’3Dã§å¯è¦–åŒ–ã™ã‚‹Webã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã€‚
    ============================================================ -->

    <!-- ğŸŒŒ Babylon.js (3D rendering engine) -->
    <!-- English: Used for rendering nodes and connections in a 3D space. -->
    <!-- æ—¥æœ¬èª: ãƒãƒ¼ãƒ‰ã‚„ãƒ™ã‚¯ã‚¿ãƒ¼ï¼ˆé–¢ä¿‚ç·šï¼‰ã‚’3Dç©ºé–“ã«æç”»ã™ã‚‹ãŸã‚ã®ã‚¨ãƒ³ã‚¸ãƒ³ã€‚ -->
    <script src="https://cdn.babylonjs.com/babylon.js"></script>
    <script src="https://cdn.babylonjs.com/gui/babylon.gui.min.js"></script>

    <!-- ğŸ”— Socket.IO (real-time communication) -->
    <!-- English: Enables live updates between the browser and the Flask server. -->
    <!-- æ—¥æœ¬èª: Flaskã‚µãƒ¼ãƒãƒ¼ã¨ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡ã‚’å®Ÿç¾ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€‚ -->
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>

    <!-- ğŸ§© favicon (empty to prevent errors in local mode) -->
    <!-- æ—¥æœ¬èª: ãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œæ™‚ã®faviconã‚¨ãƒ©ãƒ¼é˜²æ­¢ç”¨ã€‚ -->
    <link rel="icon" href="data:," />

    <!-- ============================================================
      ğŸ¨ Style Definitions
      English: Basic styling for 3D canvas, control HUD, and overlay UI.
      æ—¥æœ¬èª: 3Dã‚­ãƒ£ãƒ³ãƒã‚¹ã€æ“ä½œHUDã€ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤UIã®åŸºæœ¬ã‚¹ã‚¿ã‚¤ãƒ«å®šç¾©ã€‚
    ============================================================ -->
    <style>
      html, body {
        width: 100%; height: 100%; margin: 0;
        overflow: hidden; background: #000;
      }

      /* ğŸª Canvas Area / ã‚­ãƒ£ãƒ³ãƒã‚¹é ˜åŸŸ */
      #renderCanvas { width: 100%; height: 100%; touch-action: none; }

      /* ---- å…±é€šUI (buttons / inputs) ---- */
      /* English: Common style for buttons, selects, and inputs. */
      /* æ—¥æœ¬èª: ãƒœã‚¿ãƒ³ã‚„å…¥åŠ›æ¬„ã®å…±é€šã‚¹ã‚¿ã‚¤ãƒ«ã€‚ */
      button, select, input {
        font-family: system-ui;
        border: none;
        border-radius: 8px;
        padding: 6px 10px;
      }

      button {
        background: #4aa2ff; color: #fff; cursor: pointer;
      }

      /* ---- å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ HUD ---- */
      /* English: Input area for model selection and user questions. */
      /* æ—¥æœ¬èª: ãƒ¢ãƒ‡ãƒ«é¸æŠã¨è³ªå•å…¥åŠ›ã®ãŸã‚ã®HUDé ˜åŸŸã€‚ */
      .hud {
        position: absolute; left: 20px; bottom: 20px;
        display: flex; gap: 8px;
        background: rgba(0, 0, 0, 0.55);
        padding: 10px; border-radius: 12px; color: #fff;
      }

      /* ---- ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒãƒ¼ ---- */
      /* English: Session management UI (create/save/load). */
      /* æ—¥æœ¬èª: ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ä½œæˆãƒ»ä¿å­˜ãƒ»èª­è¾¼ã‚’è¡Œã†ãƒãƒ¼ã€‚ */
      #sessionBar {
        position: absolute; top: 14px; left: 20px;
        display: flex; gap: 8px;
        background: rgba(0, 0, 0, 0.55);
        padding: 8px 10px; border-radius: 12px; color: #fff;
      }

      /* ---- è¨€èªåˆ‡æ›¿ãƒœã‚¿ãƒ³ ---- */
      /* English: Button for toggling between Japanese/English labels. */
      /* æ—¥æœ¬èª: è¡¨ç¤ºè¨€èªã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ãƒˆã‚°ãƒ«ãƒœã‚¿ãƒ³ã€‚ */
      #langToggle {
        position: absolute; left: 20px; bottom: 84px;
        background: rgba(255,255,255,0.12);
        border: 1px solid rgba(255,255,255,0.25);
        border-radius: 6px; color: #fff;
        padding: 6px 10px; cursor: pointer;
        font-size: 13px;
      }
      #langToggle:hover { background: rgba(255,255,255,0.22); }

      /* ---- å³ä¸‹æƒ…å ±ãƒ‘ãƒãƒ« ---- */
      /* English: Displays AI responses, vector stats, or session info. */
      /* æ—¥æœ¬èª: AIå¿œç­”ãƒ»ãƒãƒ¼ãƒ‰æƒ…å ±ãƒ»ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ±è¨ˆã‚’è¡¨ç¤ºã™ã‚‹æƒ…å ±ãƒ‘ãƒãƒ«ã€‚ */
      #infoPanel {
        position: absolute; right: 20px; bottom: 20px;
        width: 340px; min-height: 100px;
        background: rgba(0,0,0,0.75);
        color: #fff; border-radius: 12px;
        padding: 12px 16px;
        font-family: system-ui; font-size: 14px; display: none;
      }
    </style>
  </head>

  <body>
    <!-- ============================================================
      ğŸ§­ Session Management Bar
      English: Provides session control (new, save, load) for multiple AI dialogues.
      æ—¥æœ¬èª: è¤‡æ•°ã®AIå¯¾è©±ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒãƒ¼ã€‚
    ============================================================ -->
    <div id="sessionBar">
      <button id="newSessionBtn" data-i18n="newSession">æ–°è¦ã‚»ãƒƒã‚·ãƒ§ãƒ³</button>
      <button id="saveSessionBtn" data-i18n="save">ä¿å­˜</button>
      <select id="loadSessionSelect" data-i18n="load">
        <option value="">ã‚»ãƒƒã‚·ãƒ§ãƒ³èª­è¾¼...</option>
      </select>
    </div>

    <!-- ============================================================
      ğŸ’¬ Input HUD
      English: Allows the user to input a question and choose the AI model.
      æ—¥æœ¬èª: ãƒ¢ãƒ‡ãƒ«é¸æŠã¨è³ªå•é€ä¿¡ã‚’è¡Œã†HUDï¼ˆæ“ä½œUIï¼‰ã€‚
    ============================================================ -->
    <div class="hud">
      <select id="modelSelect">
        <option value="gpt-4o-mini">gpt-4o-mini</option>
        <option value="gpt-4o">gpt-4o</option>
      </select>
      <input id="questionInput" type="text" placeholder="è³ªå•ã‚’å…¥åŠ›..." data-i18n="placeholder"/>
      <button id="sendBtn" data-i18n="send">é€ä¿¡</button>
    </div>

    <!-- ============================================================
      ğŸŒ Language Toggle
      English: Switches UI language dynamically using data-i18n attributes.
      æ—¥æœ¬èª: data-i18nå±æ€§ã‚’åˆ©ç”¨ã—ã¦UIã®è¨€èªã‚’å‹•çš„ã«åˆ‡ã‚Šæ›¿ãˆã‚‹ãƒœã‚¿ãƒ³ã€‚
    ============================================================ -->
    <button id="langToggle">ğŸŒ æ—¥æœ¬èª</button>

    <!-- ============================================================
      ğŸ§¾ Info Panel
      English: Displays details about current conversation nodes and vectors.
      æ—¥æœ¬èª: ç¾åœ¨ã®ä¼šè©±ãƒãƒ¼ãƒ‰ã‚„ãƒ™ã‚¯ã‚¿ãƒ¼æƒ…å ±ã‚’è¡¨ç¤ºã€‚
    ============================================================ -->
    <div id="infoPanel"></div>

    <!-- ============================================================
      ğŸŒŒ BabylonJS Canvas
      English: 3D space for visualizing the logical-emotional-abstract axis.
      æ—¥æœ¬èª: è«–ç†ãƒ»æ„Ÿæƒ…ãƒ»æŠ½è±¡ã®ä¸‰è»¸ã‚’3Dç©ºé–“ä¸Šã§å¯è¦–åŒ–ã™ã‚‹ã‚­ãƒ£ãƒ³ãƒã‚¹ã€‚
    ============================================================ -->
    <canvas id="renderCanvas"></canvas>

    <!-- ============================================================
      ğŸ”§ Script Modules
      English: Load data and rendering logic scripts.
      æ—¥æœ¬èª: ãƒ‡ãƒ¼ã‚¿ç®¡ç†ãŠã‚ˆã³æç”»ãƒ­ã‚¸ãƒƒã‚¯ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’èª­ã¿è¾¼ã‚€ã€‚
    ============================================================ -->
    <script src="src/axis-data.js"></script>
    <script src="src/axis-viewer.js"></script>
  </body>
</html>
